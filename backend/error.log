{"level":"error","message":"Erreur lors du chargement des confessions : Cannot read properties of undefined (reading 'userId')","service":"sama-link-backend","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at getConfessions (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:28:33)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:117:3)\n    at handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:435:11)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at /Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:295:15\n    at processParams (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:582:12)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:291:5)\n    at router.handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:186:3)"}
{"level":"error","message":"Erreur lors du chargement des confessions : Cannot read properties of undefined (reading 'userId')","service":"sama-link-backend","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at getConfessions (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:28:33)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:117:3)\n    at handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:435:11)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at /Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:295:15\n    at processParams (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:582:12)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:291:5)\n    at router.handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:186:3)"}
{"level":"error","message":"Erreur lors du chargement des confessions : Cannot read properties of undefined (reading 'userId')","service":"sama-link-backend","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at getConfessions (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:28:33)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:117:3)\n    at handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:435:11)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at /Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:295:15\n    at processParams (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:582:12)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:291:5)\n    at router.handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:186:3)"}
{"level":"error","message":"Erreur lors du chargement des confessions : Cannot read properties of undefined (reading 'userId')","service":"sama-link-backend","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at getConfessions (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:28:33)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/route.js:117:3)\n    at handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:435:11)\n    at Layer.handleRequest (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/lib/layer.js:152:17)\n    at /Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:295:15\n    at processParams (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:582:12)\n    at next (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:291:5)\n    at router.handle (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/router/index.js:186:3)"}
{"clientVersion":"7.2.0","code":"P2003","level":"error","message":"Erreur lors de la suppression de la confession : \nInvalid `prisma.confession.delete()` invocation in\n/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:138:35\n\n  135   return res.status(403).json({ message: 'Vous n\\'êtes pas l\\'auteur de cette confession.' });\n  136 }\n  137 \n→ 138 await prisma.confession.delete(\nForeign key constraint violated on the constraint: `Reaction_confession_id_fkey`","meta":{"driverAdapterError":{"cause":{"constraint":{"index":"Reaction_confession_id_fkey"},"kind":"ForeignKeyConstraintViolation","originalCode":"23503","originalMessage":"update or delete on table \"Confession\" violates foreign key constraint \"Reaction_confession_id_fkey\" on table \"Reaction\""},"name":"DriverAdapterError"},"modelName":"Confession"},"name":"PrismaClientKnownRequestError","service":"sama-link-backend","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.confession.delete()` invocation in\n/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:138:35\n\n  135   return res.status(403).json({ message: 'Vous n\\'êtes pas l\\'auteur de cette confession.' });\n  136 }\n  137 \n→ 138 await prisma.confession.delete(\nForeign key constraint violated on the constraint: `Reaction_confession_id_fkey`\n    at qr.handleRequestError (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)\n    at qr.handleAndLogRequestError (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)\n    at qr.request (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async a (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:805:24)\n    at async deleteConfession (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/feed.controller.ts:138:5)"}
{"level":"error","message":"Erreur requestConfessionMatch: Une demande est déjà en cours.","service":"sama-link-backend","stack":"Error: Une demande est déjà en cours.\n    at MatchingService.requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/services/matching.service.ts:424:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/matching.controller.ts:137:24)"}
{"level":"error","message":"Erreur requestConfessionMatch: Une demande est déjà en cours.","service":"sama-link-backend","stack":"Error: Une demande est déjà en cours.\n    at MatchingService.requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/services/matching.service.ts:424:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/matching.controller.ts:137:24)"}
{"level":"error","message":"Erreur requestConfessionMatch: Une demande est déjà en cours.","service":"sama-link-backend","stack":"Error: Une demande est déjà en cours.\n    at MatchingService.requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/services/matching.service.ts:424:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async requestConfessionMatch (/Users/mouhamadousarr/.gemini/antigravity/scratch/sama-link/backend/src/controllers/matching.controller.ts:137:24)"}
